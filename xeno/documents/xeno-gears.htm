<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Xeno Gears</title>
<style type="text/css">
<!--
*				{font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13px;}
.header			{font-size:25px; font-weight: bold;}
code			{color:blue}
.file_structure	{font-size:15px; font-weight: bold; color:green; font-style: underline; padding-left:10px;}
.text_table		{border-collapse: collapse;}
.text_table th	{background: #DDD; border: 1px solid #666; padding:3px;}
.text_table td	{border: 1px solid #666; padding:2px; font-size:12px;}
.no_border td	{border: 0px;}
-->
</style>
<body bgcolor="#E5E5E5" text="#000000" link="#006699" vlink="#5584AA">

<a name="top"></a>

<table width="100%" cellspacing="0" cellpadding="2" border="0">
	<tr>
		<td bgcolor="#FFFFFF" style="border:1px solid black;">
		<table width="100%" cellspacing="0" cellpadding="0" border="0">
			<tr>
				<td colspan="2">
				<table width="85%" cellspacing="0" cellpadding="0" border="0" align="center">
					<tr>
						<td align="center">
							<br /><br />
							<span class="header">Inside Xenogears</span><br />or<br />everything that you want to know about xenogears, but was afraid to ask
							<br /><br /><br />
							By Akari (ICQ:175522907) and <a href="http://www.sadnescity.it">www.sadnescity.it</a>
							<br /><br /><br />
							<br /><br /><br />
						</td>
					</tr>
					<tr>
						<td>
						<ol>
							<li><a href="#introduction">Introduction</a></li>
							<li><a href="#history">History</a></li>
							<li><a href="#file">File structure</a></li>
							<li><a href="#archive">Archive and Pack</a></li>
							<li><a href="#dir00">dir00 [stream movie]</a></li>
							<li><a href="#dir01">dir01 [init files]</a></li>
							<li><a href="#dir02">dir02 [exe files]</a></li>
							<li>dir03 [unknown]</li>
							<li>dir04-06 [sounds]</li>
							<li><a href="#dir07">dir07 [fonts]</a></li>
							<li>dir08 [unknown]</li>
							<li>dir09 [dialog faces]</li>
							<li>dir10 [compass]</li>
							<li><a href="#dir11">dir11 [field files]</a></li>
							<li><a href="#dir12">dir12 [field and scenes 3d models]</a></li>
							<li>dir13 [unknown]</li>
							<li><a href="#dir14">dir14 [menu files]</a></li>
							<li><a href="#dir15">dir15 [battle files]</a></li>
							<li><a href="#dir16">dir16 [enemies]</a></li>
							<li><a href="#dir17">dir17 [dummy]</a></li>
							<li><a href="#dir18">dir18 [battle 3d background format]</a></li>
							<li><a href="#dir19">dir19 [battle files]</a></li>
							<li><a href="#dir20">dir20 [magic files]</a></li>
							<li>dir21-23 [unknown]</li>
							<li><a href="#dir24">dir24 [world map menu files]</a></li>
							<li>dir25 [unknown]</li>
							<li><a href="#dir26">dir26-42 [world map]</a></li>
						</ol>

						<a name="introduction"></a><h2>I. Introduction</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>Xenogears is a Squaresoft game written coeval with FF7 actually a little bit after it was released 1998. It was also a incomplete release but pruned considerably more than FF7's very minor removals.</p>
								<p><a href="#top">Top</a></p>
								</td>
							</tr>
						</table>

						<a name="history"></a><h2>II. History</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>Lorem ipsum dolor sit amet,consectetuer adipiscing elit,sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.Ut wisi enim ad minim veniam,quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat,vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.Typi non habent claritatem insitam;est usus legentis in iis qui facit eorum claritatem.Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius.Claritas est etiam processus dynamicus,qui sequitur mutationem consuetudium lectorum.Mirum est notare quam littera gothica,quam nunc putamus parum claram,anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi,qui nunc nobis videntur parum clari,fiant sollemnes in futurum.</p>
								<p><a href="#top">Top</a></p>
								</td>
							</tr>
						</table>

						<a name="file"></a><h2>III. File Structure</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>The original file structure was deleted from the disk, exept two start files: SLUS_xxx.xx and SYSTEM.CNF, but after game starts file structure restores and game works whith it.</p>
								<p>The file that holds all file structure are the very first on the disk (no matter english or japanese copy of game). It starts from 24 sector and has size of 16 sectors.</p>

								<p class="file_structure">File format</p>

								<p>The file consists of repeated 7 bytes block that contents start sectors and length for directories and files.<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th>Offset 0x00 Length 0x03</th>
										<th>Offset 0x03 Length 0x04</th>
									</tr>
									<tr>
										<th>Start sector</th>
										<th>Length</th>
									</tr>
									<tr>
										<th colspan="2">Directory</th>
									</tr>
									<tr>
										<td>Start sector is the same as the sector of the first file. It doesn't interest us anyway.</td>
										<td>Length must be greater than 0xff000000. We don't know purpose of the dir Length yet.</td>
									</tr>
									<tr>
										<th colspan="2">File</td>
									</tr>
									<tr>
										<td>Start sector of the file.</td>
										<td>Length must be lesser than 0xff000000.</td>
									</tr>
									<tr>
										<th colspan="2">Others</td>
									</tr>
									<tr>
										<td colspan="2">There are some free spaces sometimes. They are filled with zeros, so we need to skip it. Its purpose are not known.</td>
									</tr>
									<tr>
										<td>0x000000.</td>
										<td>0x00000000.</td>
									</tr>
									<tr>
										<th colspan="2">End of Disk</td>
									</tr>
									<tr>
										<td>0xFFFFFF.</td>
										<td>0x00000000.</td>
									</tr>
								</table>
								</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="archive"></a><h2>IV. Archive and Pack</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p class="file_structure">Pack file format</p>

								<p>Header starts from the number of files and followed by 4 bytes offsets to the sections or subpack. The last one is the offset to end of the file. Next are the real file data. Starts from offset until next offset. In case of subpack there no offset to end of file, because we can always use offset from pack itself.<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Archive Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned long</td>
										<td>Number of sectors</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned long</td>
										<td>Offset to first file</td>
									</tr>
									<tr>
										<td colspan="3" align="center">...</td>
									</tr>
									<tr>
										<td>0xXX</td>
										<td>unsigned long</td>
										<td>Offset to lastfile</td>
									</tr>
									<tr>
										<td>0xXX + 0x04</td>
										<td>unsigned long</td>
										<td>Offset to end of file</td>
									</tr>
								</table></p>

								<p class="file_structure">Lzs archive format</p>

								<p>The LZS compression format used in Xenogears is similar to the one used in Final Fantasy 7 and other Square games, but it is coded slightly differently: 
Each packet starts with a control code, followed by compressed and uncompressed values. The control code contains a bit for each packet, if it is clear then the value is copied verbatim, if it is set then it is copied from the ring buffer. (This is directly opposite of what the decompressor in Final Fantasy does). Additionally the ringbuffer offset is calculated differently from Final Fantasy: The offset is the lower 12 bit of a 16-bit value, the length is the upper 4 bit.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir00"></a><h2>1. Stream Movie</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>Lorem ipsum dolor sit amet,consectetuer adipiscing elit,sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.Ut wisi enim ad minim veniam,quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat,vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.Typi non habent claritatem insitam;est usus legentis in iis qui facit eorum claritatem.Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius.Claritas est etiam processus dynamicus,qui sequitur mutationem consuetudium lectorum.Mirum est notare quam littera gothica,quam nunc putamus parum claram,anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi,qui nunc nobis videntur parum clari,fiant sollemnes in futurum.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir01"></a><h2>2. Init Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>Contains font, kernel and 4 sound files.<br />0028 is the main font. It is compressed.<br />0029 contains techs, items, equips and other things. It's a compressed archive.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir02"></a><h2>2. Exe Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>In this folder there is the main battle exe and the world map exe.<br />0037 should be world map.exe.<br />0038 is battle exe (compressed, begins with language error in ascii)<br />0040 is movie.exe.<br />0047 and 0049 are used in battle arena.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir07"></a><h2>7. Fonts</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>

								<p>Contais a copy of the font, but it's a dummy one. The real font is file 0028</p>

								<p class="file_structure">File format</p>

								<p>The first file are the dialog font. I don't remember name for this type of fonts format. It is simple. The bits (zeros and ones) are the two colors and we create font by them. Font start whith header:<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Font Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned short</td>
										<td>Unknown</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned short</td>
										<td>Offset to first letter</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>0x0A bytes</td>
										<td>Unknown</td>
									</tr>
								</table>
								</p>

								<p>Every symbol has 11 rows and 11 columns, that makes 22 byte per symbol two bytes is one row of symbol:<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th>+ (plus)</th>
									</tr>
									<tr>
										<td><nobr>01 byte 00000000000 00000<br />02 byte 00001110000 00000<br />03 byte 00001110000 00000<br />04 byte 00001110000 00000<br />05 byte 01111111110 00000<br />06 byte 01111111110 00000<br />07 byte 01111111110 00000<br />08 byte 00001110000 00000<br />09 byte 00001110000 00000<br />10 byte 00001110000 00000<br />11 byte 00000000000 00000</nobr></td>
									</tr>
								</table>
								</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir11"></a><h2>11. Field Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>There are pairs of two files. First one are field model textures. The second one are model, sprites data, as well as text and script.</p>

								<p class="file_structure">First file - Textures and CLUT</p>

								<p>This is uniq pack of Textures and CLUT (all other 3d models use another texture pack). It just few textures packed togather one after another aligned to sector size. Eack CLUT and texture consist from header (aligned to sector size) and few chunks (each one aligned to sector size). They are very like usual 3d textures format, exept chunks and aligment to sector size.</p>

								<p>CLUT is the usual 16BPP tim, exept header. Textures are the usual tim data without CLUT.<br /><b>Note</b>: remember, each chunk must be aligned to sector size.<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>0x04 bytes</td>
										<td>CLUT Id - 0x00001201<br />Tex  Id - 0x00001200</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned short</td>
										<td>VRam x. Start position of whole image.</td>
									</tr>
									<tr>
										<td>0x06</td>
										<td>unsigned short</td>
										<td>VRam y. Start position of whole image.</td>
									</tr>
									<tr>
										<td>0x08</td>
										<td>unsigned short</td>
										<td>Move x. Where in whole image this image is placed</td>
									</tr>
									<tr>
										<td>0x0A</td>
										<td>unsigned short</td>
										<td>Move y. Where in whole image this image is placed</td>
									</tr>
									<tr>
										<td>0x0C</td>
										<td>unsigned short</td>
										<td>width of this image</td>
									</tr>
									<tr>
										<td>0x0E</td>
										<td>unsigned short</td>
										<td>height of first chunk</td>
									</tr>
									<tr>
										<td>0x10</td>
										<td>unsigned short</td>
										<td>unknown (always 0x01)</td>
									</tr>
									<tr>
										<td>0x12</td>
										<td>unsigned short</td>
										<td>number of chunk</td>
									</tr>
									<tr>
										<td>0x14</td>
										<td>unsigned long</td>
										<td>unknown</td>
									</tr>
									<tr>
										<td>0x18</td>
										<td>unsigned long</td>
										<td>number of chunk (again?)</td>
									</tr>
									<tr>
										<td>0x1A</td>
										<td>unsigned short</td>
										<td>height of first chunk</td>
									</tr>
									<tr>
										<td colspan="3" align="center">...</td>
									</tr>
									<tr>
										<td>0xXX</td>
										<td>unsigned short</td>
										<td>height of last chunk</td>
									</tr>
								</table>
								</p>

								<p class="file_structure">Second file - Field Data</p>

								<p>This is uniq pack of different data. There are always 8 files in there. All of them are compressed. The most part of header are unknown, except few data.<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x010C</td>
										<td>0x04 bytes</td>
										<td>Length of uncompressed file 1</td>
									</tr>
									<tr>
										<td>0x0110</td>
										<td>0x04 bytes</td>
										<td>Length of uncompressed file 2</td>
									</tr>
									<tr>
										<td>0x0114</td>
										<td>0x04 bytes</td>
										<td>Length of uncompressed file 3</td>
									</tr>
									<tr>
										<td>0x0118</td>
										<td>0x04 bytes</td>
										<td>Length of uncompressed file 4</td>
									</tr>
									<tr>
										<td>0x011C</td>
										<td>0x04 bytes</td>
										<td>Length of uncompressed file 5</td>
									</tr>
									<tr>
										<td>0x0120</td>
										<td>0x04 bytes</td>
										<td>Length of uncompressed file 6</td>
									</tr>
									<tr>
										<td>0x0124</td>
										<td>0x04 bytes</td>
										<td>Length of uncompressed file 7</td>
									</tr>
									<tr>
										<td>0x0128</td>
										<td>0x04 bytes</td>
										<td>Length of uncompressed file 8</td>
									</tr>
									<tr>
										<td>0x0130</td>
										<td>0x04 bytes</td>
										<td>Offset to file 1</td>
									</tr>
									<tr>
										<td>0x0134</td>
										<td>0x04 bytes</td>
										<td>Offset to file 2</td>
									</tr>
									<tr>
										<td>0x0138</td>
										<td>0x04 bytes</td>
										<td>Offset to file 3</td>
									</tr>
									<tr>
										<td>0x013C</td>
										<td>0x04 bytes</td>
										<td>Offset to file 4</td>
									</tr>
									<tr>
										<td>0x0140</td>
										<td>0x04 bytes</td>
										<td>Offset to file 5</td>
									</tr>
									<tr>
										<td>0x0144</td>
										<td>0x04 bytes</td>
										<td>Offset to file 6</td>
									</tr>
									<tr>
										<td>0x0148</td>
										<td>0x04 bytes</td>
										<td>Offset to file 7</td>
									</tr>
									<tr>
										<td>0x014C</td>
										<td>0x04 bytes</td>
										<td>Offset to file 8</td>
									</tr>
									<tr>
										<td>0x0150</td>
										<td>0x04 bytes</td>
										<td>Offset to end of pack</td>
									</tr>
								</table></p>

								<p>There are files:
								<ol>
									<li>1) unknown</li>
									<li>2) unknown (hierarchy?)</li>
									<li>3) pack of 3d models</li>
									<li>4) unknown (sprites?)</li>
									<li>5) unknown (sprites animation?)</li>
									<li>6) unknown (scripts?)</li>
									<li>7) unknown</li>
									<li>8) text</li>
								</ol>
								</p>

								<p class="file_structure">3) pack of 3d models</p>
								<p>Look at description of dir 18. This is pack of usual 3d models.</p>

								<p class="file_structure">8) text</p>
								<p>Text starts with header:<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>0x04 bytes</td>
										<td>Number of text block - 1</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned short</td>
										<td>Offset to first text block</td>
									</tr>
									<tr>
										<td colspan="3" align="center">...</td>
									</tr>
									<tr>
										<td>0xXX</td>
										<td>unsigned short</td>
										<td>Offset to last text block</td>
									</tr>
									<tr>
										<td>0xXX + 2</td>
										<td>unsigned char</td>
										<td>X size of first block</td>
									</tr>
									<tr>
										<td>0xXX + 3</td>
										<td>unsigned char</td>
										<td>Y size of first block</td>
									</tr>
									<tr>
										<td colspan="3" align="center">...</td>
									</tr>
									<tr>
										<td>0xXX + XX</td>
										<td>unsigned char</td>
										<td>X size of last block</td>
									</tr>
									<tr>
										<td>0xXX + XX + 1</td>
										<td>unsigned char</td>
										<td>Y size of last block</td>
									</tr>
								</table>
								</p>

								<p>Text data itself are simple. In english version there is one byte per symbol, in japanese two bytes. But there are few opcodes and special symbols that we can meet here:<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="2">Special symbols</th>
									</tr>
									<tr>
										<th>Value</th>
										<th>Description</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>End of dialog</td>
									</tr>
									<tr>
										<td>0x01</td>
										<td>End of line</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>New dialog</td>
									</tr>
									<tr>
										<td>0x03</td>
										<td>Wait for player input</td>
									</tr>
								</table>
								<br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="2">Opcodes</th>
									</tr>
									<tr>
										<th>Value</th>
										<th>Description</th>
									</tr>
									<tr>
										<td>0x0F00XX</td>
										<td>Delay text for XX frames</td>
									</tr>
									<tr>
										<td>0x0F01XX</td>
										<td>Accelerator ??</td>
									</tr>
									<tr>
										<td>0x0F02XX</td>
										<td>Close window after XX frames</td>
									</tr>
									<tr>
										<td>0x0F05XX</td>
										<td>Load char name from kernel (0 - Fei, 1 - Elly, 2 - Citan, 3 - Bart and so on)</td>
									</tr>
								</table>
								</p>

								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir12"></a><h2>12. Field and Scenes 3d Models</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>The purpose of the first file in dir are unknown. The pairs of next files are animation and model data.</p>

								<p class="file_structure">Animation File format</p>

<pre>
Animation File
 * Sub Pack
    * Animation Pack
       * <b>1st Animation</b>
       * ...
       * Nth Animation
    * 1 Unknown
    * ...
    * N Unknown
 * Unknown
</pre>

								<p>1st Animation are always static frame.</p>

								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Animation Format</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned short</td>
										<td>Number of bone</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>0x16 bytes</td>
										<td>Unknown</td>
									</tr>
								</table>

								<p>Next are bone positions. Size of each bone data are 12 byte. For rotation I used ((rotation * 360) / (32768 / 8))<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Single bone position</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>signed short</td>
										<td>Rotation X</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>signed short</td>
										<td>Rotation Y</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>signed short</td>
										<td>Rotation Z</td>
									</tr>
									<tr>
										<td>0x06</td>
										<td>signed short</td>
										<td>Translate X</td>
									</tr>
									<tr>
										<td>0x08</td>
										<td>signed short</td>
										<td>Translate Y</td>
									</tr>
									<tr>
										<td>0x0A</td>
										<td>signed short</td>
										<td>Translate Z</td>
									</tr>
								</table></p>

								<p class="file_structure">Model File format</p>
								<p>Look at description of dir 18. Model format are exactly the same, exept there are only four files in pack.</p>

								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir14"></a><h2>14. Menu Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>It contains lots of things. Almost every field menu. Field menu's exeS (they're just a copy of the same file). All field menu's graphics. And some cd2 cutscenes' graphics. Chapter text (like Into Solaris, First and Last, and so on). Shops' exes (one for gear shop and so on). Menu graphics are compressed.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir15"></a><h2>15. Battle Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>Folder15 is battle menu, graphics and text. Everything is inside file 2614. It's an archive of compressed files</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir16"></a><h2>16. Battle Sprites</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>

								<p>All enemies in game are gathered here. There are both 2d sprites and 3d models. Files contains monsters' HP, values and so on and their techs and some text are here too.</p>

								<p class="file_structure">File format</p>

								<p>I just has quick view on this files, so some of them are not in the format that I am describing, and some are not completely match. But, most of them are working so I write down all I know, so anyone can use it or expand this. I dont know the purpose of the small files, but the big one are battle sprites (and I think something more). This file starts whith header:<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Battle Sprites Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned long</td>
										<td>Number of sprites</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned long</td>
										<td>Offset to first tileset (or something after CLUT and animation block)</td>
									</tr>
									<tr>
										<td>0x08</td>
										<td>0x0C bytes</td>
										<td>Sprite offsets (this will be described later)</td>
									</tr>
								</table>
								</p>

								<p>Sprite offsets ane not known very well. The first offsets are easy (they a match the description, but others are not. Fof example this 1C 0C 00 00 01 00 00 00 00 00 00 01):<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Sprite offsets</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned long</td>
										<td>Offset to CLUT and animation block</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned long</td>
										<td>Offset to tileset</td>
									</tr>
									<tr>
										<td>0x08</td>
										<td>unsigned long</td>
										<td>Unknown</td>
									</tr>
								</table>
								</p>

								<p class="file_structure">CLUT and animation block</p>

								<p>CLUT and animation block (Cab in short) consists of three files (this is usual form of archive in xenogears). The purpose of first one are unknown, the second one are the frames for animation and the third are the CLUTs:<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Cab header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned long</td>
										<td>Number of files (always 0x03)</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned long</td>
										<td>Offset to unknown block</td>
									</tr>
									<tr>
										<td>0x08</td>
										<td>unsigned long</td>
										<td>Offset to frames block</td>
									</tr>
									<tr>
										<td>0x0C</td>
										<td>unsigned long</td>
										<td>Offset to CLUTs</td>
									</tr>
								</table>
								</p>

								<p class="file_structure">Frames block</p>

								<p>Frame block contains all frames for animation of the sprite. It uses tileset coords:<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Frames Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned byte</td>
										<td>Number of frames</td>
									</tr>
									<tr>
										<td>0x01</td>
										<td>unsigned byte</td>
										<td>Unknown</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned short</td>
										<td>Offset to first frame</td>
									</tr>
									<tr>
										<td colspan="3" align="center">...</td>
									</tr>
									<tr>
										<td>0xXX</td>
										<td>unsigned short</td>
										<td>Offset to last frame</td>
									</tr>
								</table>
								</p>

								<p>After the frames header are frames itself. They are starts from frame offsets from header and continue according to their content:<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Frame Data</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned byte</td>
										<td>Number of tiles</td>
									</tr>
									<tr>
										<td>0x01</td>
										<td>unsigned byte</td>
										<td>Unknown</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned short</td>
										<td>Unknown</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned short</td>
										<td>Offset to first tile</td>
									</tr>
									<tr>
										<td colspan="3" align="center">...</td>
									</tr>
									<tr>
										<td>0x04 + Number of tiles * 0x02</td>
										<td>unsigned short</td>
										<td>Offset to last tile</td>
									</tr>
									<tr>
										<td colspan="3">After that structure getting more complicated.</td>
									</tr>
									<tr>
										<td>0xXX</td>
										<td>0x03 bytes</td>
										<td>There can be strange block. If right after last reading are 0xEXXXXX then skip it (or try to gess what it is)</td>
									</tr>
									<tr>
										<td>0xXX</td>
										<td>0x01 bytes</td>
										<td>There can be strange block. If right after last reading are 0xCX then skip it (or try to gess what it is)</td>
									</tr>
									<tr>
										<td>0xXX</td>
										<td>0x03 bytes</td>
										<td>If block has mask like that 0x00XXYY, then XX are the X position of tile in frame. YY are the Y position of tile. It is signed byte. x = 0, y = 0 are the center of frame</td>
									</tr>
									<tr>
										<td colspan="3">After you read all the tiles positions - frame block is over.</td>
									</tr>
								</table>
								</p>

								<p>After the frames blocks are the tiles blocks:<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Tile Data</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned byte</td>
										<td>It seems that this is tileset number. There can be more than one tilesets so if value is 0x00 - 1st tileset, if 0x02 - second.</td>
									</tr>
									<tr>
										<td>0x01</td>
										<td>unsigned byte</td>
										<td>X position in the tileset</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned byte</td>
										<td>Y position in the tileset</td>
									</tr>
									<tr>
										<td>0x03</td>
										<td>unsigned byte</td>
										<td>Width</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned byte</td>
										<td>Height</td>
									</tr>
								</table>
								</p>

								<p class="file_structure">CLUTs block</p>

								<p>The first four bytes are header, next are the data itself. CLUT are the usual 16bpp tim, exept header:<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">CLUT Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned short</td>
										<td>Number of CLUT</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned short</td>
										<td>Number of monster color (-1)</td>
									</tr>
									<tr>
										<td colspan="3">As far as I understand for sure - the total number of CLUTS are the first value * (second value + 1).</td>
									</tr>
								</table>
								</p>

								<p class="file_structure">Tilesets block</p>

								<p>Tilesets are the real graphics in sprites. There can be more than one tileset for sprite (because maximum size of one tileset are 256x256, but some sprites needs much more):<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Tilesets Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned long</td>
										<td>Number of tilesets</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned long</td>
										<td>Offset to first tileset</td>
									</tr>
									<tr>
										<td colspan="3" align="center">...</td>
									</tr>
									<tr>
										<td>0xXX</td>
										<td>unsigned long</td>
										<td>Offset to last tileset</td>
									</tr>
								</table>
								</p>

								<p>Tileset are the 4bpp tim, exept header:<br /><br />
								<table cellspacing="0" class="text_table">
									<tr>
										<th colspan="3">Tileset Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned short</td>
										<td>Width (needs to be multiply by 4)</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned short</td>
										<td>Height</td>
									</tr>
								</table>
								</p>

								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir17"></a><h2>17. Dummy</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>Folder17 seems to be dummy.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir18"></a><h2>18. Battle 3d Background Format</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>There are pairs of two files. First one are the battle background itself. The purpose of second one are still unknown.</p>

								<p>The first file are pack that consists from 5 files:
								<ol>
									<li>Sub pack of Textures and Palettes</li>
									<li>3d Data</li>
									<li>Hierarchy</li>
									<li>Unknown</li>
									<li>Unknown</li>
								</ol>
								</p>

								<p class="file_structure">Textures and CLUTs</p>

								<p>Sub pack of Textures and CLUTs archive may content different amount of files. They are two types: CLUTs and textures</p>

								<p>CLUTs are the usual 16BPP tim, exept header. Textures are the usual tim data without CLUT<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>0x04 bytes</td>
										<td>CLUT Id - 0x00001101<br />Tex  Id - 0x00001100</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned short</td>
										<td>VRam x. Start position of whole image.</td>
									</tr>
									<tr>
										<td>0x06</td>
										<td>unsigned short</td>
										<td>VRam y. Start position of whole image.</td>
									</tr>
									<tr>
										<td>0x08</td>
										<td>unsigned short</td>
										<td>Move x. Where in whole image this image is placed</td>
									</tr>
									<tr>
										<td>0x0A</td>
										<td>unsigned short</td>
										<td>Move y. Where in whole image this image is placed</td>
									</tr>
									<tr>
										<td>0x0C</td>
										<td>unsigned short</td>
										<td>width of this image</td>
									</tr>
									<tr>
										<td>0x0E</td>
										<td>unsigned short</td>
										<td>height of this image</td>
									</tr>
								</table>
								</p>

								<p class="file_structure">3D Data</p>

								<p>3d data contains all main info about 3d model (vertex, mesh, texture coords)</p>

								<p>Header of 3d data contains few blocks headers each one represents some part of the whole model. It starts from number of such blocks, and then are the blocks headers itself.<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">3D Data Header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned long</td>
										<td>Number of blocks</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>0x12 bytes</td>
										<td>All zeros</td>
									</tr>
									<tr>
										<th colspan="3">1st block header</th>
									</tr>
									<tr>
										<td>0x10</td>
										<td>unsigned short</td>
										<td>unknown</td>
									</tr>
									<tr>
										<td>0x12</td>
										<td>unsigned short</td>
										<td>number of vertex</td>
									</tr>
									<tr>
										<td>0x14</td>
										<td>unsigned short</td>
										<td>number of mesh</td>
									</tr>
									<tr>
										<td>0x16</td>
										<td>unsigned short</td>
										<td>number of mesh block</td>
									</tr>
									<tr>
										<td>0x18</td>
										<td>unsigned long</td>
										<td>offset to vertex block</td>
									</tr>
									<tr>
										<td>0x1C</td>
										<td>unsigned long</td>
										<td>offset to the same block as vertex block, perhaps normals block (in others 3d files it differs from vertex offset)</td>
									</tr>
									<tr>
										<td>0x24</td>
										<td>unsigned long</td>
										<td>offset to block that describes view of each poligon (texture coords, monochrome color etc)</td>
									</tr>
									<tr>
										<td>0x28</td>
										<td>0x32 bytes</td>
										<td>unknown (perhaps some flags)</td>
									</tr>
								</table>
								</p>

								<p>All vertexes in vertex block are 8 bytes length. They are folowed one after one until block is finished. The vertex format are very simple:<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Vertex format</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned short</td>
										<td>X</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned short</td>
										<td>Y</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned short</td>
										<td>Z</td>
									</tr>
									<tr>
										<td>0x06</td>
										<td>unsigned short</td>
										<td>always zero</td>
									</tr>
								</table>
								</p>

								<p>Mesh block starts with small header:<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Mesh block header</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned byte</td>
										<td>this byte contains some flags and among them are the triangle/quad swich.<br />000x0000<br />q - 0 - triangle, 1 - quad</td>
									</tr>
									<tr>
										<td>0x01</td>
										<td>unsigned byte</td>
										<td>unknown flags (always 0x77)</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned short</td>
										<td>number of mesh</td>
									</tr>
								</table>
								</p>

								<p>Next are the mesh itself. All mesh block are 8 bytes length. They are folowed one after one until block is finished. If there are few mesh blocks, then after end of meshes are the second mesh header.<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Mesh block format</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>unsigned short</td>
										<td>index of vertex a</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>unsigned short</td>
										<td>index of vertex b</td>
									</tr>
									<tr>
										<td>0x04</td>
										<td>unsigned short</td>
										<td>index of vertex c</td>
									</tr>
									<tr>
										<td>0x06</td>
										<td>unsigned short</td>
										<td>index of vertex d<br />in case of triangle it always 0x0000</td>
									</tr>
								</table>
								</p>

								<p>The structure of describe block are little tricky. I call it describe block, because here not only texture coords, but all configure for each mesh.<br />For example: After 0xC4 packet all meshes are displayed with such texture page, and after 0xC8 packet all meshes are displayed with such CLUT ID, until next 0xC8 packet.<br />It seems that all this packet are headers to real pachet that are send to GPU directly.<br />The order of mesh packet are corresponds to the order of mesh in mesh block. Here list of all special abbreviations that used in packet list:<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th>Abbreviation</th>
										<th>Description</th>
									</tr>
									<tr>
										<td>BGR</td>
										<td>
										<table cellspacing="0" width="100%" class="text_table">
											<tr>
												<td align="center">23-16</td>
												<td align="center">15-8</td>
												<td align="center">7-0</td>
											</tr>
											<tr>
												<td align="center">Blue</td>
												<td align="center">Green</td>
												<td align="center">Red</td>
											</tr>
										</table>
										</td>
									</tr>
									<tr>
										<td>Texture Page</td>
										<td>
										<table cellspacing="0" width="100%" class="text_table">
											<tr>
												<td align="center">15</td>
												<td align="center">14</td>
												<td align="center">13</td>
												<td align="center">12</td>
												<td align="center">11</td>
												<td align="center">10</td>
												<td align="center">9</td>
												<td align="center">8</td>
												<td align="center">7</td>
												<td align="center">6</td>
												<td align="center">5</td>
												<td align="center">4</td>
												<td align="center">3</td>
												<td align="center">2</td>
												<td align="center">1</td>
												<td align="center">0</td>
											</tr>
											<tr>
												<td align="center" colspan="7">&nbsp;</td>
												<td align="center" colspan="2">TP</td>
												<td align="center" colspan="2">ABR</td>
												<td align="center">TY</td>
												<td align="center" colspan="4">TX</td>
											</tr>
										</table>
										<table class="no_border">
											<tr>
												<td>TX</td>
												<td>0-16</td>
												<td>X*64</td>
												<td>texture page x coordinate</td>
											</tr>
											<tr>
												<td>TY</td>
												<td>0</td>
												<td>0</td>
												<td>texture page y coordinate</td>
											</tr>
											<tr>
												<td></td>
												<td>1</td>
												<td>256</td>
												<td></td>
											</tr>
											<tr>
												<td>ABR</td>
												<td>0</td>
												<td>0.5xB+0.5xF</td>
												<td>Semi transparency mode</td>
											</tr>
											<tr>
												<td></td>
												<td>1</td>
												<td>1.0xB+1.0xF</td>
												<td></td>
											</tr>
											<tr>
												<td></td>
												<td>2</td>
												<td>1.0xB-1.0xF</td>
												<td></td>
											</tr>
											<tr>
												<td></td>
												<td>3</td>
												<td>1.0xB+0.25xF</td>
												<td></td>
											</tr>
											<tr>
												<td>TP</td>
												<td>0</td>
												<td>4-bit CLUT</td>
												<td></td>
											</tr>
											<tr>
												<td></td>
												<td>1</td>
												<td>8-bit CLUT</td>
												<td></td>
											</tr>
											<tr>
												<td></td>
												<td>2</td>
												<td>15-bit direct</td>
												<td></td>
											</tr>
										</table>
										</td>
									</tr>
									<tr>
										<td>CLUT ID</td>
										<td>
										<table cellspacing="0" width="100%" class="text_table">
											<tr>
												<td align="center">15</td>
												<td align="center">14</td>
												<td align="center">13</td>
												<td align="center">12</td>
												<td align="center">11</td>
												<td align="center">10</td>
												<td align="center">9</td>
												<td align="center">8</td>
												<td align="center">7</td>
												<td align="center">6</td>
												<td align="center">5</td>
												<td align="center">4</td>
												<td align="center">3</td>
												<td align="center">2</td>
												<td align="center">1</td>
												<td align="center">0</td>
											</tr>
											<tr>
												<td align="center" colspan="10">Y coordinate</td>
												<td align="center" colspan="6">X coordinate</td>
											</tr>
										</table>
										</td>
									</tr>
								</table>
								</p>

								<p>Here list of packet that i met:<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="5">Packet list</th>
									</tr>
									<tr>
										<td>Order</td>
										<td align="center">31 - 24</td>
										<td align="center">23 - 16</td>
										<td align="center">15 - 8</td>
										<td align="center">7 - 0</td>
									</tr>
									<tr>
										<th colspan="5" align="left">0x20 Monochrome triangle</th>
									</tr>
									<tr>
										<td>1</td>
										<td align="center">0x20</td>
										<td align="center" colspan="3">BGR</td>
									</tr>
									<tr>
										<th colspan="5" align="left">0x22 Monochrome triangle with semi transparency</th>
									</tr>
									<tr>
										<td>1</td>
										<td align="center">0x22</td>
										<td align="center" colspan="3">BGR</td>
									</tr>
									<tr>
										<th colspan="5" align="left">0x25 Triangle with texture. Texture displays as is.</th>
									</tr>
									<tr>
										<td>1</td>
										<td align="center">vertex C texture X</td>
										<td align="center">vertex C texture Y</td>
										<td align="center">Unknown</td>
										<td align="center">0x25</td>
									</tr>
									<tr>
										<td>2</td>
										<td align="center">vertex A texture X</td>
										<td align="center">vertex A texture Y</td>
										<td align="center">vertex B texture X</td>
										<td align="center">vertex B texture Y</td>
									</tr>
									<tr>
										<th colspan="5" align="left">0x28 Monochrome quad</th>
									</tr>
									<tr>
										<td>1</td>
										<td align="center">0x28</td>
										<td align="center" colspan="3">BGR</td>
									</tr>
									<tr>
										<th colspan="5" align="left">0x2D Quad with texture. Texture displays as is.</th>
									</tr>
									<tr>
										<td>1</td>
										<td align="center" colspan="3">Unknown</td>
										<td align="center">0x2D</td>
									</tr>
									<tr>
										<td>2</td>
										<td align="center">vertex A texture X</td>
										<td align="center">vertex A texture Y</td>
										<td align="center">vertex B texture X</td>
										<td align="center">vertex B texture Y</td>
									</tr>
									<tr>
										<td>3</td>
										<td align="center">vertex C texture X</td>
										<td align="center">vertex C texture Y</td>
										<td align="center">vertex D texture X</td>
										<td align="center">vertex D texture Y</td>
									</tr>
									<tr>
										<th colspan="5" align="left">0x30 Monochrome triangle with gourad shading</th>
									</tr>
									<tr>
										<td>1</td>
										<td align="center">0x30</td>
										<td align="center" colspan="3">BGR</td>
									</tr>
									<tr>
										<th colspan="5" align="left">0xC4 Texture page controller</th>
									</tr>
									<tr>
										<td>1</td>
										<td align="center">0xC4</td>
										<td align="center">0x00</td>
										<td align="center" colspan="2">Texture Page</td>
									</tr>
									<tr>
										<th colspan="5" align="left">0xC8 CLUT controller</th>
									</tr>
									<tr>
										<td>1</td>
										<td align="center">0xC8</td>
										<td align="center">0x00</td>
										<td align="center" colspan="2">CLUT ID</td>
									</tr>
									<tr>
										<td colspan="5">There are more of this packets (some quad with semi transparency and so so. i need time to get through all of them)</td>
									</tr>
								</table>
								</p>

								<p class="file_structure">HRC format</p>

								<p>HRC is the model skeleton without positions of the bones. It's just hierarcy. It not has any header, just 2 level array.<br />Last bone are always 0xFFFEFFFE or -2, -2<br /><br />
								<table cellspacing="0" width="100%" class="text_table">
									<tr>
										<th colspan="3">Bone HRC</th>
									</tr>
									<tr>
										<th>Start offset</th>
										<th>Size</th>
										<th>Value</th>
									</tr>
									<tr>
										<td>0x00</td>
										<td>signed short</td>
										<td>Block number attached to this bone ("-1" - no block)</td>
									</tr>
									<tr>
										<td>0x02</td>
										<td>signed short</td>
										<td>Parent bone number of this bone ("-1" - root bone)</td>
									</tr>
								</table></p>

								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir19"></a><h2>19. Battle Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>Folder19 contains character's voices in snd files. 3088 is an archive containing battle text and battle text's "control file". They control windows size, avatars and so on. There are also character robots 3d models</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir20"></a><h2>20. Magic Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>It seems that all magic and special effects are gathered here.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir24"></a><h2>24. World Map Menu Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>File 3957 is a compressed copy of file 2597, and file 3958 is a copy of file 2593 (folder 14). They're used only in world maps. File 3957 is "main menu" exe, file  3958 contains menu graphics and texts.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						<a name="dir26"></a><h2>26. World Map Menu Files</h2>

						<table width="95%" cellspacing="0" cellpadding="0" border="0" align="center">
							<tr>
								<td>
								<p>Directory from 26 to 42 are world map files. From 26 to 34 the first file of the folder contains world map's text. Some of them are used only in cutscenes. And when something changes during the game, the game loads another folder. For example, the first folder is used only when Lahan is not yet destroyed. The second after that event, and so on.</p>
								<p><a href="#top">Top</a></p>
								<br />
								</td>
							</tr>
						</table>

						</td>
					</tr>
				</table>
				</td>
			</tr>
		</table>
		</td>
	</tr>
</table>
</body>
</html>